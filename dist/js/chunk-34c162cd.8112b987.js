(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-34c162cd"],{"2cf6":function(t,a,e){"use strict";e.r(a);var s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"ckout"},[e("div",{staticClass:"container"},[e("h1",[t._v("結帳")]),e("hr"),e("div",{staticClass:"table-responsive cart-area"},[e("table",{staticClass:"table"},[t._m(0),e("tbody",[t._l(t.carts,(function(a){return e("tr",{key:a.product.id+1},[e("td",{staticClass:"name"},[e("a",{attrs:{href:"#"}},[t._v(t._s(a.product.title))])]),e("td",{staticClass:"img"},[e("img",{attrs:{src:a.product.imageUrl[0],alt:""}})]),e("td",{staticClass:"calc"},[e("div",{staticClass:"input-group"},[e("span",{staticClass:"text-center",attrs:{type:"number",min:"1"}},[t._v(" "+t._s(a.quantity)+" ")])])]),e("td",{staticClass:"unit"},[t._v(t._s(a.product.unit))]),e("td",{staticClass:"prod-price"},[t._v(" "+t._s(t._f("currency")(a.product.price))+" ")])])})),e("tr",[t._m(1),e("td",{staticClass:"text-center"},[t._v(" "+t._s(t.cartPageTotalNum)+" ")])])],2),e("tfoot",[e("tr",[t._m(2),e("td",{staticClass:"text-center prod-price"},[t._v(" "+t._s(t._f("currency")(t.cartTotal))+" ")])]),e("tr",[t._m(3),e("td",{staticClass:"text-center prod-price"},[t._v(" - "+t._s(t._f("currency")(t.cartTotal))+" ")])]),e("tr",[t._m(4),e("td",{staticClass:"text-center prod-price"},[t._v(" "+t._s(t._f("currency")(t.cartTotal))+" ")])])])])]),e("br"),e("div",{staticClass:"my-5 justify-content-center"},[e("validation-observer",{scopedSlots:t._u([{key:"default",fn:function(a){var s=a.invalid;return[e("h4",[t._v("收件資訊")]),e("hr"),e("form",{staticClass:"row",on:{submit:function(a){return a.preventDefault(),t.createOrder(a)}}},[e("div",{staticClass:"col-sm-6"},[e("div",{staticClass:"form-group"},[e("validation-provider",{attrs:{rules:"required"},scopedSlots:t._u([{key:"default",fn:function(a){var s=a.errors,r=a.classes;return[e("label",{attrs:{for:"name"}},[t._v("收件人姓名")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.name,expression:"form.name"}],staticClass:"form-control",class:r,attrs:{type:"text",id:"name"},domProps:{value:t.form.name},on:{input:function(a){a.target.composing||t.$set(t.form,"name",a.target.value)}}}),e("span",{staticClass:"text-danger"},[t._v(t._s(s[0]))])]}}],null,!0)})],1)]),e("div",{staticClass:"col-sm-6"},[e("div",{staticClass:"form-group"},[e("validation-provider",{attrs:{rules:"required|email"},scopedSlots:t._u([{key:"default",fn:function(a){var s=a.errors,r=a.classes;return[e("label",{attrs:{for:"email"}},[t._v("收件人信箱")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.email,expression:"form.email"}],staticClass:"form-control",class:r,attrs:{type:"email",id:"email"},domProps:{value:t.form.email},on:{input:function(a){a.target.composing||t.$set(t.form,"email",a.target.value)}}}),e("span",{staticClass:"text-danger"},[t._v(t._s(s[0]))])]}}],null,!0)})],1)]),e("div",{staticClass:"col-sm-6"},[e("div",{staticClass:"form-group"},[e("validation-provider",{attrs:{rules:"required|min:8"},scopedSlots:t._u([{key:"default",fn:function(a){var s=a.errors,r=a.classes;return[e("label",{attrs:{for:"tel"}},[t._v("收件人電話")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.tel,expression:"form.tel"}],staticClass:"form-control",class:r,attrs:{type:"tel",id:"tel"},domProps:{value:t.form.tel},on:{input:function(a){a.target.composing||t.$set(t.form,"tel",a.target.value)}}}),e("span",{staticClass:"text-danger"},[t._v(t._s(s[0]))])]}}],null,!0)})],1)]),e("div",{staticClass:"col-sm-6"},[e("div",{staticClass:"form-group"},[e("validation-provider",{attrs:{rules:"required"},scopedSlots:t._u([{key:"default",fn:function(a){var s=a.errors,r=a.classes;return[e("label",{attrs:{for:"address"}},[t._v("收件人地址")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.address,expression:"form.address"}],staticClass:"form-control",class:r,attrs:{type:"text",id:"address"},domProps:{value:t.form.address},on:{input:function(a){a.target.composing||t.$set(t.form,"address",a.target.value)}}}),e("span",{staticClass:"text-danger"},[t._v(t._s(s[0]))])]}}],null,!0)})],1)]),e("div",{staticClass:"col-sm-12"},[e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"address"}},[t._v("付款方式")]),e("select",{directives:[{name:"model",rawName:"v-model",value:t.form.payment,expression:"form.payment"}],staticClass:"form-control",attrs:{required:""},on:{change:function(a){var e=Array.prototype.filter.call(a.target.options,(function(t){return t.selected})).map((function(t){var a="_value"in t?t._value:t.value;return a}));t.$set(t.form,"payment",a.target.multiple?e:e[0])}}},[e("option",{attrs:{value:"",disabled:"",selected:""}},[t._v("請選擇")]),e("option",{attrs:{value:"ATM"}},[t._v("ATM")]),e("option",{attrs:{value:"Credit"}},[t._v("Credit")]),e("option",{attrs:{value:"ApplePay"}},[t._v("ApplePay")]),e("option",{attrs:{value:"GooglePay"}},[t._v("GooglePay")])])]),e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"msg"}},[t._v("留言")]),e("textarea",{staticClass:"form-control",attrs:{id:"msg",cols:"30",rows:"3"}})]),e("div",{staticClass:"text-center"},[e("button",{staticClass:"btn btn",attrs:{type:"submit",disabled:s}},[t._v(" 送出表單 ")])])])])]}}])})],1)])])},r=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("thead",[e("tr",[e("th",[t._v("品名")]),e("th",[t._v("圖片")]),e("th",[t._v("數量")]),e("th",[t._v("單位")]),e("th",[t._v("單價")])])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("td",{staticClass:"text-right",attrs:{colspan:"4"}},[e("span",{staticClass:"total-word"},[t._v("總數")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("td",{staticClass:"text-right",attrs:{colspan:"4"}},[e("span",{staticClass:"total-word"},[t._v("小計")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("td",{staticClass:"text-right",attrs:{colspan:"4"}},[e("span",{staticClass:"total-word"},[t._v("折扣")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("td",{staticClass:"text-right",attrs:{colspan:"4"}},[e("span",{staticClass:"total-word"},[t._v("總計")])])}],o=(e("99af"),e("4160"),e("159b"),{data:function(){return{carts:[],cartTotal:0,cartPageTotalNum:0,form:{name:"",email:"",tel:"",address:"",payment:"",message:""}}},methods:{updateCartTotal:function(){var t=this;this.carts.forEach((function(a){t.cartTotal+=a.product.price*a.quantity}))},updateQuantity:function(t,a){var e=this;if(!(a<=0)){this.status.loadingNum=t,console.log(this.status.loadingNum);var s="".concat("https://course-ec-api.hexschool.io","/api/").concat("bba8c8a3-a5f2-4a81-91ef-9273532ebb26","/ec/shopping"),r={product:t,quantity:a};console.log(r),console.log(r.quantity),this.$http.patch(s,r).then((function(t){e.status.loadingNum="",console.log(t),e.cartTotal=0,e.cartPageTotalNum=0,e.$bus.$emit("get-cart-num"),e.updateCartTotal(),e.getCart()})).catch((function(t){console.dir(t)}))}},getCart:function(){var t=this,a="".concat("https://course-ec-api.hexschool.io","/api/").concat("bba8c8a3-a5f2-4a81-91ef-9273532ebb26","/ec/shopping");this.$http.get(a).then((function(a){console.log(a),t.carts=a.data.data,t.cartTotalNum=0,t.carts.forEach((function(a){t.cartPageTotalNum+=a.quantity})),t.cartTotal=0,t.updateCartTotal()})).catch((function(t){console.dir(t)}))}},created:function(){this.getCart()}}),n=o,i=e("2877"),c=Object(i["a"])(n,s,r,!1,null,null,null);a["default"]=c.exports},"99af":function(t,a,e){"use strict";var s=e("23e7"),r=e("d039"),o=e("e8b5"),n=e("861d"),i=e("7b0b"),c=e("50c4"),l=e("8418"),u=e("65f0"),d=e("1dde"),m=e("b622"),p=e("2d00"),f=m("isConcatSpreadable"),v=9007199254740991,_="Maximum allowed index exceeded",g=p>=51||!r((function(){var t=[];return t[f]=!1,t.concat()[0]!==t})),h=d("concat"),C=function(t){if(!n(t))return!1;var a=t[f];return void 0!==a?!!a:o(t)},b=!g||!h;s({target:"Array",proto:!0,forced:b},{concat:function(t){var a,e,s,r,o,n=i(this),d=u(n,0),m=0;for(a=-1,s=arguments.length;a<s;a++)if(o=-1===a?n:arguments[a],C(o)){if(r=c(o.length),m+r>v)throw TypeError(_);for(e=0;e<r;e++,m++)e in o&&l(d,m,o[e])}else{if(m>=v)throw TypeError(_);l(d,m++,o)}return d.length=m,d}})}}]);
//# sourceMappingURL=chunk-34c162cd.8112b987.js.map